/*
Full-width split-screen :
Adapted heavily from @author Kevin Powell
https://www.youtube.com/watch?v=Ivk8Blw2VTI
https://codepen.io/kevinpowell/pen/ZEmgQvV
*/

@use "../abstracts/" as *;

:root {
  --wrapper-padding-inline: 1rem;
  --wrapper-max-width: 50rem;

  --section-padding-block: 3rem;
  --section-image-width: 90%;
  --section-image-margin: calc(100% - var(--section-image-width))
}

/* remove the padding so images can take up the entire height */
.full-width-split-screen {
  padding-block: 0;
  margin-top: 4rem;
  margin-bottom: 4rem;
  display: grid;

  @include mq(small) {
    /* outermost columns emulate the spacing from the .wrapper
       while the two inner columns divide the rest of the space
       into two equal parts */
    grid-template-columns:
      minmax(var(--wrapper-padding-inline), 1fr)
      minmax(0, calc(var(--wrapper-max-width) / 2))
      minmax(0, calc(var(--wrapper-max-width) / 2))
      minmax(var(--wrapper-padding-inline), 1fr);

    /* for positioning the pseudo-elements
       to fill in the rest of the background*/
    position: relative;
  }

  /* ensure the image fills up the entire space available */
  & > img {
    object-fit: cover;
    object-position: 50% 35%;

    @include mq(small) {
      width: var(--section-image-width);
      max-height: 50vh;
      @include roundcorners();
    }

    /* if the image is on the left, it covers the entire left half */
    &:first-child {
      grid-column: 1 / 3;

      border-top-left-radius: 0;
      border-bottom-left-radius: 0;

      @include mq(small) {
        margin-right: var(--section-image-margin);
      }
    }

    /* if the image is on the right, it covers the entire right half */
    &:last-child {
      grid-column: 3 / -1;

      border-top-right-radius: 0;
      border-bottom-right-radius: 0;

      @include mq(small) {
        margin-left: var(--section-image-margin);
      }
    }
  }

  /* match the section padding for the text blocks for consistency */
  & > :not(img) {
    padding-inline: var(--wrapper-padding-inline);
    padding-bottom: 2rem;

    /* make sure text doesn't touch the edge of the viewport 
       and the content is vertically centered */
    display: grid;
    align-content: center;
    justify-items: start;

    grid-column: 1 / 3;

    @include mq(small) {
      padding-block: var(--section-padding-block);
    }

    /* if the non-image is first, place it in the second column
       (first column is empty to emulate the .wrapper) */
    &:first-child {
      grid-row: 2;

      @include mq(small) {
        grid-column: 2 / 3;
        padding-left: 0;
        grid-row: 1;
      }
    }

    /* if the non-image is last, place it in the third column
       (fourth column is empty to emulate the .wrapper) */
    &:last-child {
      padding-right: 1rem;
      
      @include mq(small) {
        grid-column: 3 / 4;
      }
    }

    /* at large screens, ensure the background color
       goes to the edge of the page */
    &::before {
      content: "";
      position: absolute;
      inset: 0;
      background: inherit;
    }

    /* ensures the background color fills the entire left side */
    &:first-child::before {
      grid-column: 1 / 2;
    }

    /* ensures the background color fills the entire right side */
    &:last-child::before {
      grid-column: 4 / 5;
    }
  }
}
